{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '43518191-3e4362bb1fc47484118bdfa22';\nconst perPage = 15;\n\nexport async function searchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const { hits, totalHits } = response.data;\n    return { hits, total: totalHits };\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}\n","export function addImageCard(image) {\n  const galleryList = document.querySelector('ul.gallery');\n\n  const galleryItem = document.createElement('li');\n  galleryItem.classList.add('gallery-item');\n\n  const galleryLink = document.createElement('a');\n  galleryLink.classList.add('gallery-link');\n  galleryLink.href = image.largeImageURL;\n\n  const galleryImage = document.createElement('img');\n  galleryImage.src = image.webformatURL;\n  galleryImage.alt = image.tags;\n\n  const imageInfo = document.createElement('div');\n  imageInfo.classList.add('image-info');\n  imageInfo.innerHTML = `\n      <p>Likes: ${image.likes}</p>\n      <p>Views: ${image.views}</p>\n      <p>Comments: ${image.comments}</p>\n      <p>Downloads: ${image.downloads}</p>\n  `;\n\n  galleryLink.appendChild(galleryImage);\n  galleryLink.appendChild(imageInfo);\n  galleryItem.appendChild(galleryLink);\n  galleryList.appendChild(galleryItem);\n}\n","import { searchImages } from './js/pixabay-api.js';\nimport { addImageCard } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nconst form = document.getElementById('searchForm');\nconst galleryElement = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst endMessage = \"We're sorry, but you've reached the end of search results.\";\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet cardHeight = 0;\nlet lightbox;\n\nloader.style.display = 'none';\nloadMoreButton.style.display = 'none';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  searchQuery = document.getElementById('searchInput').value.trim();\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  toggleLoader(true);\n  await performSearch();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n  toggleLoader(true);\n  await performSearch();\n  smoothScroll();\n});\n\nasync function performSearch() {\n  try {\n    const { hits, total } = await searchImages(searchQuery, currentPage);\n    if (hits.length === 0) {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'Sorry, there are no more images matching your search query.',\n      });\n\n      galleryElement.innerHTML = '';\n      loadMoreButton.style.display = 'none';\n    } else {\n      if (currentPage === 1) {\n        galleryElement.innerHTML = '';\n        totalHits = total;\n        loadMoreButton.style.display = 'none';\n      }\n      hits.forEach(image => {\n        addImageCard(image);\n      });\n      if (galleryElement.querySelectorAll('.gallery-item').length < totalHits) {\n        loadMoreButton.style.display = 'block';\n      } else {\n        loadMoreButton.style.display = 'none';\n        iziToast.info({ message: endMessage });\n      }\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery-link', {\n          captions: true,\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    }\n  } catch (error) {\n    console.error('Error', error);\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction smoothScroll() {\n  if (currentPage > 1) {\n    if (cardHeight === 0) {\n      const firstCard = document.querySelector('.gallery-item');\n      const rect = firstCard.getBoundingClientRect();\n      cardHeight = rect.height;\n    }\n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["apiKey","perPage","searchImages","query","page","url","response","axios","hits","totalHits","error","addImageCard","image","galleryList","galleryItem","galleryLink","galleryImage","imageInfo","loader","form","galleryElement","loadMoreButton","endMessage","currentPage","searchQuery","cardHeight","lightbox","e","iziToast","toggleLoader","performSearch","smoothScroll","total","SimpleLightbox","show"],"mappings":"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"}